<div class="d-flex justify-content-between align-items-center mb-2">
  <div class="w-48px"></div>
  <h1 class="m-0" mat-dialog-title data-automation-id="select-zones-title">Select Zones</h1>
  <button
    mat-icon-button
    class="close-button dialog-close-button-fix"
    (click)="close()"
    data-automation-id="close-dialog-button"
  >
    <mat-icon class="close-icon">close</mat-icon>
  </button>
</div>
<!-- <div class="text-center"> <span class="label label-gray px-2 f-14 mb-4">Batch ID:&nbsp;<b>{{batchID}}</b></span></div> -->
<div class="card br-14 table-responsive borderless px-0 mb-3">
  <ng-scrollbar class="mat-table-scrollbar h-60v">
    <table mat-table [dataSource]="dataSource" class="w-100">
      <!-- Checkbox Column -->
      <ng-container matColumnDef="select">
        <th mat-header-cell *matHeaderCellDef>
          <mat-checkbox
            (change)="$event ? toggleAllRows($event) : null"
            [checked]="
              (selection.hasValue() && isAllSelected()) ||
              (isAllReadyAssigned() && isProcessPutAways) ||
              AllRecordsChecked()
            "
            [indeterminate]="selection.hasValue() && !isAllSelected()"
            [aria-label]="checkboxLabel()"
            color="primary"
            data-automation-id="select-all-checkbox"
          >
          </mat-checkbox>
        </th>
        <td mat-cell *matCellDef="let row">
          <ng-container *ngIf="isProcessPutAways || isAdminPreferences">
            <mat-checkbox
              (click)="$event.stopPropagation()"
              (change)="selectZone(row)"
              [checked]="
                row.selected ||
                selection.isSelected(row) ||
                (row.selected == false && row.available == false)
              "
              [disabled]="disableCheckbox(row)"
              [aria-label]="checkboxLabel(row)"
              color="primary"
              [matTooltip]="
                row.selected == false && row.available == false
                  ? 'Assigned to Another Batch!'
                  : ''
              "
              matTooltipPosition="above"
              [attr.data-automation-id]="'zone-checkbox-' + row.zone"
            >
            </mat-checkbox>
          </ng-container>
          <ng-container *ngIf="isPickToteInduction">
            <mat-checkbox
              (click)="$event.stopPropagation()"
              (change)="selectZone(row)"
              [checked]="
                row.selected ||
                selection.isSelected(row) ||
                (row.selected == false && row.available == false)
              "
              [disabled]="!row.available"
              [aria-label]="checkboxLabel(row)"
              color="primary"
              matTooltipPosition="above"
              [attr.data-automation-id]="'zone-checkbox-' + row.zone"
            >
            </mat-checkbox>
          </ng-container>
        </td>
      </ng-container>

      <!-- Position Column -->
      <ng-container matColumnDef="zone">
        <th mat-header-cell *matHeaderCellDef data-automation-id="zone-header">Zone</th>
        <td mat-cell *matCellDef="let element; let i = index" [attr.data-automation-id]="'zone-cell-' + i + '-' + element.zone">{{ element.zone }}</td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="locationdesc">
        <th mat-header-cell *matHeaderCellDef data-automation-id="locationdesc-header">Location Description</th>
        <td mat-cell *matCellDef="let element; let i = index" [attr.data-automation-id]="'locationdesc-cell-' + i + '-' + element.locationName">{{ element.locationName }}</td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="locationtype">
        <th mat-header-cell *matHeaderCellDef data-automation-id="locationtype-header">Location Type</th>
        <td mat-cell *matCellDef="let element; let i = index" [attr.data-automation-id]="'locationtype-cell-' + i + '-' + element.locationType">{{ element.locationType }}</td>
      </ng-container>

      <!-- Symbol Column -->
      <ng-container matColumnDef="stagingzone">
        <th mat-header-cell *matHeaderCellDef data-automation-id="stagingzone-header">Staging Zone</th>
        <td mat-cell *matCellDef="let element; let i = index" [attr.data-automation-id]="'stagingzone-cell-' + i + '-' + element.stagingZone">
          <ng-container *ngIf="element.stagingZone != 'False'"
            >Yes</ng-container
          >
          <ng-container *ngIf="element.stagingZone == 'False'">No</ng-container>
        </td>
      </ng-container>

      <ng-container matColumnDef="flag">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let element">
          <mat-icon *ngIf="element.locked">flag</mat-icon>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns">
        <!-- (click)="selection.toggle(row)" Removed the click functionality on row due to mis selection-->
      </tr>
    </table>
  </ng-scrollbar>
</div>
<div class="d-flex gap-12">
  <div class="d-flex gap-12" *ngIf="isProcessPutAways">
    <button
      type="submit"
      mat-stroked-button
      class="form-button-submit btn-lg"
      (click)="selectStaging()"
      color="primary"
      data-automation-id="select-non-staging-button"
    >
      Select Non-Staging
    </button>
    <button
      type="submit"
      mat-stroked-button
      class="btn-lg"
      color="primary"
      (click)="selectStaging('1')"
      data-automation-id="select-staging-button"
    >
      Select Staging
    </button>
    <button
      type="submit"
      mat-stroked-button
      class="btn-lg"
      color="primary"
      (click)="close()"
      data-automation-id="cancel-button"
    >
      Cancel
    </button>
  </div>

  <button
    type="submit"
    mat-flat-button
    class="form-button-submit btn-lg flex-grow-1"
    color="primary"
    (click)="updateZones()"
    data-automation-id="update-zones-button"
  >
    {{ btnText }}
  </button>
</div>
