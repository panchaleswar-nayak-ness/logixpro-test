<div #trigger="matMenuTrigger" class="position-fixed invisible" [style.left]="contextMenuPosition.x" [style.top]="contextMenuPosition.y" [matMenuTriggerFor]="contextMenuFilter"></div>

<mat-menu #contextMenuFilter="matMenu" (menuOpened)="onMenuOpened()"  (menuClosed)="onMenuClosed()" data-automation-id="tablectx-context-menu">
  <ng-template matMenuContent let-item="item">
    <ng-container *ngFor="let con of matMenuContentItem; let i = index">
      <button mat-menu-item (click)="onContextMenuCommand(item.SelectedItem, item.FilterColumnName, con.condition, getType(item.SelectedItem))" 
        *ngIf="con.type === OperationTypes.EQUALS || 
        (con.type === OperationTypes.STRING && (getType(item.SelectedItem) == 'string' && getType(item.FilterColumnName) != 'date')) ||
        (con.type === OperationTypes.NUMERIC && getType(item.SelectedItem) == 'number') ||
        (con.type === OperationTypes.DATE && getType(item.FilterColumnName) == 'date')" [attr.data-automation-id]="'tablectx-menuitem-' + i">
        {{con.title}}
      </button>
    </ng-container>
    
    <button mat-menu-item [matMenuTriggerFor]="InputFiltersList" [matMenuTriggerData]="{category: item}" *ngIf="getType(item.SelectedItem) != 'boolean'" data-automation-id="tablectx-inputfilters-btn">Input FIlters</button>
    <button mat-menu-item (click)="onContextMenuCommand('', item.FilterColumnName, 'clear', '')" data-automation-id="tablectx-clear-filter-btn">Clear Filter</button>
    <button mat-menu-item (click)="onContextMenuCommand('', '', 'clears', '')" data-automation-id="tablectx-clear-filters-btn">Clear Filters</button>
  </ng-template>
</mat-menu>

<mat-menu #InputFiltersList="matMenu" (menuOpened)="onMenuOpened()"  (menuClosed)="onMenuClosed()" data-automation-id="tablectx-inputfilters-menu">
  <ng-template matMenuContent let-category="category">
    <ng-container *ngFor="let item of matMenuContentCategory; let i = index">
        <button mat-menu-item (click)="InputFilterSearch(category.FilterColumnName, item.condition, getType(category.SelectedItem))" 
          *ngIf="item.type === OperationTypes.EQUALS || 
          (item.type === OperationTypes.STRING && (getType(category.SelectedItem) == 'string' && getType(category.FilterColumnName) != 'date')) ||
          (item.type === OperationTypes.NUMERIC && (getType(category.SelectedItem) == 'number' || getType(category.FilterColumnName) == 'date'))" [attr.data-automation-id]="'tablectx-inputfilteritem-' + i">
          {{item.title}}
        </button>
    </ng-container>
  </ng-template>
</mat-menu>  