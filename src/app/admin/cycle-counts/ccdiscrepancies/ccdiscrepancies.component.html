<mat-card class="mat-elevation-z g-card mb-3">
  <mat-card-content>
    <div class="row">
      <div class="d-xl-flex justify-content-between">
        <div class="d-xl-flex align-items-center">
          <h2
            class="card-header-title mb-0 me-4 d-flex align-items-center mb-3 mb-xl-0" data-automation-id="discrepancies-heading"
          >
            <div class="mat-icon-wrap me-1 me-lg-3">
              <span class="material-symbols-outlined">
                production_quantity_limits
              </span>
            </div>
            <span>Discrepancies</span>
          </h2>
          <mat-checkbox class="custom-checkbox mb-3 mb-xl-0" color="primary" data-automation-id="print-cc-disc-checkbox"
            >Print CC Disc Directly</mat-checkbox
          >
        </div>
        <mat-form-field class="action-dropdown d-block" appearance="outline">
          <mat-label data-automation-id="actions-label">Actions</mat-label>
          <mat-select
            #matRef
            class="employees-action"
            (selectionChange)="onActionChange($event)" data-automation-id="actions-select"
          >
          <mat-option [value]="ActionType.CreateTransaction" [disabled]="!hasCountQueueData" data-automation-id="option-create-transactions">Create Transactions</mat-option>
          <mat-option [value]="ActionType.AssignLocation" data-automation-id="option-location-assignment">Location Assignment</mat-option>
          <mat-option [value]="ActionType.ImportBatches" data-automation-id="option-import-count-batches">Import Count Batches</mat-option>
          <mat-option [value]="ActionType.ImportDiscrepancies" data-automation-id="option-import-discrepancies">Import Discrepancies</mat-option>
          <mat-option [value]="ActionType.SetMapping" data-automation-id="option-set-import-field-mappings">Set import field mappings</mat-option>
          </mat-select>
          <span class="material-symbols-outlined icon-expand-more">
            expand_more
          </span>
        </mat-form-field>
      </div>
    </div>

    <div class="d-xl-flex justify-content-end align-items-center mb-2 mt-2">
        <div class="d-xl-flex gap-12">
          <button
            type="submit"
            mat-stroked-button
            class="m-1 m-xl-0 button-remove-all-w-stroke mb-2"
            color="warn"
            (click)="removeAll()"
          >
            Clear Discrepancies Queue
          </button>
        </div>
      <div class="d-xl-flex gap-12">
        <button
          type="submit"
          mat-stroked-button
          class="mb-3 mb-xl-0 form-button-submit m-1 m-xl-0"
          color="primary"
          (click)="AppendAll()" data-automation-id="append-all-button"
        >
          Append All
        </button>
      </div>
      
    </div>
   <div class="card br-14 table-responsive my-3"  *ngIf="hasValidColumns"
            >
            <ng-scrollbar class="mat-table-scrollbar scroll-bar min-max-height-table scroll-min-height" track="all" [autoHeightDisabled]="false">
        
       <table mat-table [dataSource]="dataSource.data" matSort
                     class="w-100 table-borderless bodertable"
                     (matSortChange)="announceSortChange($event)">

                <ng-container matColumnDef="{{col.colHeader}}" *ngFor="let col of displayedColumns; let indexOfelement=index;">
                  <th class="px-4" mat-header-cell *matHeaderCellDef mat-sort-header [attr.data-automation-id]="'table-header-' + col.colDef">
                    {{ col.colTitle }}
                  </th>
                 <td class="px-4" mat-cell *matCellDef="let element"
                 (contextmenu)="onContextMenu($event, element[col.colHeader], col.colDef)" [attr.data-automation-id]="'table-data-' + col.colDef + '-' + (element[col.colHeader] ? element[col.colHeader] : ' ')">
                <span *ngIf="col.colHeader === 'qtyDifference'" 
      [ngClass]="getQuantityDifferenceClasses(element.qtyDifference)">
  {{ formatQuantityDifference(element.qtyDifference) }}
</span>
                <span *ngIf="col.colHeader !== 'qtyDifference'">
                {{ element[col.colHeader] }}
                </span>
                </td>
                </ng-container>

                <ng-container matColumnDef="actions" stickyEnd>
                  <th class="actionContainer-Header" *matHeaderCellDef data-automation-id="table-header-Actions"></th>
                  <td mat-cell *matCellDef="let seletedRecord" class="actionContainerdata" [attr.data-automation-id]="'table-data-Actions-' + (seletedRecord.id ? seletedRecord.id : ' ')">
                   <button (click)="AddInQueue(seletedRecord)"
                  mat-icon-button
                  aria-label="Add"
                  matTooltip="Add"
                  matTooltipPosition="above" [attr.data-automation-id]="'add-button-' + (seletedRecord.id ? seletedRecord.id : ' ')"
                >
                  <mat-icon class="icon-circle-edit">add</mat-icon>
                </button>
                  </td>
                </ng-container>

                <tr class="mat-row" *matNoDataRow (contextmenu)="onContextMenu($event, '')">
                  <td class="px-4" [attr.colspan]="columnValues.length" data-automation-id="no-data-row">No data available in table.</td>
                </tr>

                <mat-header-row *matHeaderRowDef="columnValues; sticky: true" class="border"></mat-header-row>
                <mat-row *matRowDef="let row; columns: columnValues;" ></mat-row>
              </table>
      </ng-scrollbar>
    </div>
     <div class="table-pagination d-flex justify-content-start align-items-center" 
            >
            <mat-paginator [length]="this.customPagination.total" [pageSize]="10" showFirstLastButtons [pageSizeOptions]="[10, 20, 100]" (page)="handlePageEvent($event)" data-automation-id="table-paginator"></mat-paginator>
          </div>
    
  </mat-card-content>
</mat-card>
