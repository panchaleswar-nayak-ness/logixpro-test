<mat-card class="mat-elevation-z g-card h-100">
  <mat-card-content>
    <div class="d-block d-xl-flex justify-content-between align-items-center mb-3 flex-wrap">
      <div class="d-flex align-items-center">
        <h2 class="col card-header-title d-flex align-items-center mb-xl-0 mb-3" data-automation-id="select-order-heading">
          <div class="mat-icon-wrap me-3">
            <span class="material-symbols-outlined"> filter_frames </span>
          </div>
          <span>Select Order</span>
        </h2>
        <span class="label label-gray px-2 mb-xl-0 mb-1 mx-2 text-16" matTooltipPosition="above" [matTooltip]="displayOrderNumber">Order No.:&nbsp;<b class="badge-ch-limit">{{ displayOrderNumber || "-" }}</b></span>
        <span class="label label-gray px-2 mb-xl-0 mb-1 mx-2 text-16" matTooltipPosition="above" [matTooltip]="displayToteID">Tote ID:&nbsp;<b class="badge-ch-limit">{{ displayToteID || "-" }}</b></span>
      </div>
      <div>
        <button
          (click)="deleteOrder()"
          *ngIf="authService.UserPermissonByFuncName('Order Status Delete')"
          [disabled]="
            totalLinesOrder == 0 ||
            !authService.UserPermissonByFuncName('Order Status Delete')
          "
          mat-flat-button
          color="warn"
          class="btn-regular w-100 mb-xl-0 mb-3"
          [ngClass]="{
            'disabled-button': totalLinesOrder == 0,
            'delete-button': totalLinesOrder > 0
          }"
          data-automation-id="delete-order-button"
        >
          Delete Order
        </button>
      </div>
    </div>

    <div class="row">
      <div class="col-xxl-9">
        <div class="d-xl-flex gap-12 align-items-center">
          <mat-form-field
            class="action-dropdown mb-3 mb-xl-0 w-100 flex-1"
            appearance="outline"
          >
            <mat-label data-automation-id="select-label">Select</mat-label>
            <mat-select
              class="employees-action"
              [(ngModel)]="columnSelect"
              (selectionChange)="onSelectionChange($event.value)"
              data-automation-id="select-dropdown"
            >
              <mat-option selected value="Order Number" data-automation-id="option-order-number"> Order No. </mat-option>
              <mat-option value="Tote ID" data-automation-id="option-tote-id"> Tote ID </mat-option>
            </mat-select>
            <span class="material-symbols-outlined icon-expand-more">
              expand_more
            </span>
          </mat-form-field>

          <span class="v-br mb-3 mb-xl-0 d-xl-block d-none">-</span>

          <div class="d-flex g-mini-search-box mb-3 mb-xl-0 flex-grow-1 min-width-40px">
            <mat-form-field
              class="w-100 bg-white br-8 min-w-20px"
              appearance="fill"
              [floatLabel]="getFloatLabelValue()"
              [hideRequiredMarker]="hideRequiredControl.value"
            >
              <span class="material-symbols-outlined icon-search">
                Search
              </span>
              <input
                #searchInput
                (keyup.enter)="selectOrderByTote()"
                (keyup)="getNextItemNo($event)"
                type="text"
                placeholder="Search"
                aria-label="Number"
                matInput
                [disabled]="!columnSelect"
                [(ngModel)]="searchField"
                [matAutocomplete]="auto"
                data-automation-id="search-input"
              />
              <button
                matSuffix
                *ngIf="searchField"
                class="clear-btn"
                (click)="searchField = ''; clear()"
                data-automation-id="clear-search-button"
              >
                <mat-icon class="text-20 text-chrome-600">cancel</mat-icon>
              </button>
              <mat-autocomplete
                class="card custom-scroll panel-custom-scroll d-table"
                #auto="matAutocomplete"
                (optionSelected)="selectOrderByTote();this.searchField = ''"
                data-automation-id="autocomplete-dropdown"
              >
                <ng-container *ngIf="columnSelect == 'Order Number'">
                  <h6 class="card-header matAutoCompHeader stickyHeader" data-automation-id="autocomplete-header-order-number">
                    <span class="order-no-col px-2">Order Number</span>
                    <span class="com-date-col px-2">Completed Date</span>
                  </h6>
                  <mat-option
                    *ngFor="let option of searchAutocompleteList"
                    [value]="option.orderNumber"
                    class="matAutoCompTableContent"
                    [attr.data-automation-id]="'autocomplete-option-order-number-' + option.orderNumber"
                  >
                    <div class="loc_option">
                      <span class="order-no-col px-2">{{
                        option.orderNumber
                      }}</span>
                      <span class="com-date-col px-2">{{
                        option.completedDate
                      }}</span>
                    </div>
                  </mat-option>
                </ng-container>

                <ng-container *ngIf="columnSelect == 'Tote ID'">
                  <mat-option
                    *ngFor="let option of searchAutocompleteList"
                    [value]="option"
                    [attr.data-automation-id]="'autocomplete-option-tote-id-' + option"
                  >
                    {{ option }}
                  </mat-option>
                </ng-container>
              </mat-autocomplete>
            </mat-form-field>
          </div>
        </div>
      </div>

      <div class="col-xxl-3">
        <button
          (click)="clear()"
          mat-flat-button
          color="primary"
          class="button-remove-all-w-stroke w-100 mb-3 mb-xl-0 text-pure-white"
          data-automation-id="clear-button"
        >
          Clear
        </button>
      </div>
    </div>

    <div class="row align-items-center mb-2">
      <div class="col-md-12">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <h2 class="mb-2 mt-3 d-flex align-items-center f-16" data-automation-id="lines-heading">
              <b>Lines</b>
              <mat-checkbox
                [checked]="filterByTote"
                (change)="checkFilter($event.checked)"
                class="example-margin custom-checkbox ms-3"
                color="primary"
                data-automation-id="filter-by-tote-checkbox"
                >Filter Info by Tote</mat-checkbox
              >
            </h2>
          </div>
        </div>
      </div>
    </div>

    <div class="row d-flex justify-content-between align-items-center">
      <div *ngFor="let info of info" class="col-md-4">
        <app-info-card-component
          title="{{ info.title }}"
          value="{{ info.value }}"
          colorClass="{{ info.colorClass }}"
        ></app-info-card-component>
      </div>
    </div>
  </mat-card-content>
</mat-card>
