<mat-card class="mat-elevation-z g-card mb-4">
  <mat-card-content>
    <div class="d-flex justify-content-between align-items-center mb-2">
      <div>
        <app-icon-heading-component icon="list_alt" heading="Batch Manager Controls" [automationId]="'heading-batch-manager-controls'"></app-icon-heading-component>
      </div>
    </div>
    <div class="card bg-light-blue bg-50 px-4 py-4 br-14 mb-3">
      <div class="justify-content-between">
        <div class="row">
          <div class="col-12 col-xl-3">
            <mat-form-field class="custom-form-field w-100 __grab_cursor mb-3 mb-xl-0" appearance="outline" data-automation-id="form-field-transaction-type">
              <mat-label data-automation-id="label-transaction-type">Transaction Type</mat-label>
              <mat-select [(ngModel)]="transType" (selectionChange)="changeTranType($event.value)"
                disableOptionCentering [attr.data-automation-id]="'select-transaction-type-' + transType">
                <mat-option *ngFor="let type of transList; let i = index" value="{{ type.id }}" [attr.data-automation-id]="'option-transaction-type-' + type.id">{{ type.name }}</mat-option>
              </mat-select>
              <span class="material-symbols-outlined icon-expand-more">
                expand_more
              </span>
            </mat-form-field>
          </div>
          <div class="col-12 col-xl-3">
            <mat-form-field class="custom-form-field w-100 __grab_cursor mb-3 mb-xl-0" appearance="outline" data-automation-id="form-field-current-pick-mode">
              <mat-label data-automation-id="label-current-pick-mode">Current Pick Mode</mat-label>
              <input matInput disabled class="" value="Pick and Pass" type="text" data-automation-id="input-current-pick-mode" />
            </mat-form-field>
          </div>
          <div class="col-12 col-xl-3">
            <mat-form-field class="custom-form-field w-100 __grab_cursor mb-3 mb-xl-0" appearance="outline" data-automation-id="form-field-delete-batch">
              <mat-label data-automation-id="label-delete-batch">Delete Batch</mat-label>
              <mat-select [(ngModel)]="batchID" [attr.data-automation-id]="'select-delete-batch-' + batchID">
                <mat-option *ngFor="let batch of batchList; let i = index" [disabled]="
                    !authService.UserPermissonByFuncName(
                      'Batch Manager Delete All'
                    ) && batch == 'All Transaction'
                  " value="{{ batch }}" [attr.data-automation-id]="'option-delete-batch-'  + batch">{{ batch }}</mat-option>
              </mat-select>
              <span class="material-symbols-outlined icon-expand-more">
                expand_more
              </span>
            </mat-form-field>
          </div>
          <div class="col-12 col-xl-3 d-flex d-xl-block justify-content-center mt-2">
            <button [disabled]="
                batchID == '' ||
                !authService.UserPermissonByFuncName('Batch Manager Delete All')
              " mat-stroked-button color="warn"
              class="float-end button-remove-all-w-stroke bg-white button custom-button"
              (click)="deleteBatch(transType, batchID)" data-automation-id="delete-batch-button">
              Delete
            </button>
          </div>
        </div>
      </div>
    </div>
  </mat-card-content>
</mat-card>

<ng-template #deleteAction>
  <div class="mat-modal-wrap text-center">
    <mat-dialog-content>
      <div class="prompt-wrap">
        <div class="d-flex justify-content-center prompt-icon-wrap">
          <span #cancel class="material-symbols-outlined prompt-icon-delete mb-4">
            delete
          </span>
        </div>
        <p class="prompt-message py-1 mb-0 text-error">
          <b class="heading-22" data-automation-id="heading-delete-options-single-batches">Delete options for Single Batches</b>
        </p>
        <p class="prompt-message py-3 mb-2">
          <b data-automation-id="label-select-delete-option">Select the desired option for deleting the selected batch ?</b>
        </p>
        <div class="br-14 px-4 py-3 checkbox-background mb-4">
          <mat-checkbox (change)="checkOptions($event)" class="example-margin" color="primary" data-automation-id="checkbox-understand-data-cannot-be-recovered">I understand data cannot
            be recovered</mat-checkbox>
        </div>
      </div>
    </mat-dialog-content>
    <mat-dialog-actions class="d-flex flex-column justify-content-center">
      <button class="prompt-action-danger-button mb-3 w-100 btn-lg" (click)="onDeleteOptions('batch_tote')"
        [disabled]="!isChecked" mat-stroked-button mat-dialog-close data-automation-id="delete-batch-and-tote-button">
        Delete Batch and Tote
      </button>
      <button class="mb-3 w-100 btn-lg text-error" mat-stroked-button (click)="onDeleteOptions('batch')"
        [disabled]="!isChecked" mat-dialog-close data-automation-id="delete-batch-button-modal">
        Delete Batch
      </button>
      <button class="mb-3 w-100 btn-lg" mat-stroked-button mat-dialog-close data-automation-id="cancel-delete-batch-button">
        Cancel
      </button>
    </mat-dialog-actions>
  </div>
</ng-template>

<ng-template #deleteByTransaction>
  <div class="mat-modal-wrap text-center">
    <mat-dialog-content>
      <div class="prompt-wrap">
        <div class="d-flex justify-content-center prompt-icon-wrap">
          <span #cancel class="material-symbols-outlined prompt-icon-delete mb-4">
            delete
          </span>
        </div>
        <p class="prompt-message py-1 mb-0 text-error">
          <b class="heading-22" data-automation-id="heading-batch-manager">Batch Manager</b>
        </p>
        <p class="prompt-message py-3 mb-0">
          <b data-automation-id="label-confirm-delete-all-batches">Are you sure you want to delete all batches with a transaction type
            of {{ transType }} ?</b>
        </p>
        <div class="br-14 px-4 py-3 checkbox-background mb-4">
          <mat-checkbox (change)="checkOptions($event)" class="example-margin" color="primary" data-automation-id="checkbox-understand-data-cannot-be-recovered">I understand data cannot
            be recovered</mat-checkbox>
        </div>
      </div>
    </mat-dialog-content>
    <mat-dialog-actions class="d-flex flex-column justify-content-center">
      <button class="prompt-action-danger-button mb-3 w-100 btn-lg" (click)="onDeleteOptions('batch_tote_trans')"
        [disabled]="!isChecked" mat-stroked-button mat-dialog-close data-automation-id="delete-batch-and-tote-by-transaction-button">
        Delete Batch and Tote
      </button>
      <button class="mb-3 w-100 btn-lg" mat-stroked-button mat-dialog-close data-automation-id="cancel-delete-batch-by-transaction-button">
        Cancel
      </button>
    </mat-dialog-actions>
  </div>
</ng-template>