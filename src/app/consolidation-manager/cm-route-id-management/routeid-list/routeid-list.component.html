<div class="container-fluid p-0" data-automation-id="route-id-list-container">
  <div class="row">
    <div class="col-12">
      <mat-card class="mat-elevation-z g-card" data-automation-id="route-id-list-card">
        <mat-card-content>
          <div class="row">
            <app-icon-heading-component heading="{{headingRouteIDList}}" icon="format_list_bulleted" data-automation-id="route-id-list-heading">
            </app-icon-heading-component>
          </div>

          <div class="header-filter-bar" data-automation-id="filter-bar">
            <div class="header-filter-options w-100 d-xl-flex d-lg-block align-items-center justify-content-between filter" data-automation-id="filter-options">
                <app-column-filter-component 
                    [tableColumns]="searchDisplayedColumns" 
                    [searchCol]="columnSearch.searchColumn.colDef"
                    (selectionChangeEvent)="onSelectionChange(filterCmp.searchCol)"
                    (colKeyUpEnterEvent)="searchColumn()"
                    (searchKeyUpEvent)="this.columnSearch.searchValue = $event;onSearchKeyUp(this.columnSearch.searchValue)"
                    (searchKeyUpEnterEvent)="searchData()"
                    (clearInputFieldEvent)="onClearFilter()"
                    [searchString]="columnSearch.searchValue"
                    [showNoDataMessage]="false" data-automation-id="column-filter-component"
                    >
                </app-column-filter-component>
            </div>
          </div>

          <div class="card br-14 table-responsive my-3"  *ngIf="hasValidColumns" data-automation-id="route-id-table-container"
            >
            <ng-scrollbar class="mat-table-scrollbar scroll-bar min-max-height-table scroll-min-height" track="all" [autoHeightDisabled]="false" data-automation-id="route-id-table-scrollbar">
              <table mat-table [dataSource]="dataSource" matSort
                     class="custom-table g-card-table employee-location-table w-100"
                     (matSortChange)="announceSortChange($event)" data-automation-id="route-id-table">

                <ng-container matColumnDef="{{col.colHeader}}" *ngFor="let col of displayedColumns; let indexOfelement=index;">
                  <th class="header container-table-header" mat-header-cell *matHeaderCellDef mat-sort-header [attr.data-automation-id]="'table-header-' + col.colTitle">
                    {{ col.colTitle }}
                  </th>
                  <td class="container-table-data" mat-cell *matCellDef="let element; let i = index"
                      (contextmenu)="onContextMenu($event, element[col.colHeader], col.colDef)" [attr.data-automation-id]="'table-row-' + i + '-' + element[col.colHeader] + '-' + col.colHeader + '-cell'">
                    <span [ngClass]="getConsolidationStatusClass(col, element)">
                      {{ element[col.colHeader] }}
                    </span>
                  </td>
                </ng-container>

                <ng-container matColumnDef="actions" stickyEnd>
                  <th class="actionContainer-Header" *matHeaderCellDef data-automation-id="table-header-actions"></th>
                  <td mat-cell *matCellDef="let seletedRecord; let i = index" class="actionContainerdata" [attr.data-automation-id]="'table-row-' + i + '-' + (seletedRecord[displayedColumns[0].colHeader || 'unknown']) + '-actions-cell'">
                    <button mat-icon-button [matMenuTriggerFor]="appMenu" aria-label="More actions for row" [ngClass]="{'active-btn':seletedRecord.selected}" class="circle-icon-o" appearance="outline" [attr.data-automation-id]="'actions-button-' + (seletedRecord[displayedColumns[0].colHeader || 'unknown'])">
                      <mat-icon>more_horiz</mat-icon>
                    </button>

                    <mat-menu #appMenu="matMenu" [attr.data-automation-id]="'actions-menu-' + (seletedRecord[displayedColumns[0].colHeader || 'unknown'])">
                      <button mat-menu-item (click)="edit(seletedRecord)" data-automation-id="view-details-menu-item">View Details</button>
                      <!-- Conditionally show the Request Release button -->
                      <button mat-menu-item 
                      *ngIf="seletedRecord['RouteIDStatus'] === 'In Consolidation'" 
                      (click)="RequestRelease(seletedRecord)" data-automation-id="request-release-menu-item">
                Request Release
              </button>
                    </mat-menu>
                  </td>
                </ng-container>

                <tr class="mat-row" *matNoDataRow (contextmenu)="onContextMenu($event, undefined, '')" data-automation-id="table-no-data-row">
                  <td class="mat-cell border" [attr.colspan]="columnValues.length">No data available in table.</td>
                </tr>

                <mat-header-row *matHeaderRowDef="columnValues; sticky: true" class="border" data-automation-id="route-id-table-header-row"></mat-header-row>
                <mat-row *matRowDef="let row; columns: columnValues;" [attr.data-automation-id]="'route-id-table-row-' + (row[displayedColumns[0].colHeader || 'unknown'])"></mat-row>
              </table>
            </ng-scrollbar>
          </div>

          <div class="table-pagination d-flex justify-content-start align-items-center" data-automation-id="route-id-paginator"
            >
            <mat-paginator [length]="this.customPagination.total" [pageSize]="10" showFirstLastButtons [pageSizeOptions]="[10, 20, 100]" (page)="handlePageEvent($event)" data-automation-id="table-paginator"></mat-paginator>
          </div>

        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>

<div></div>
