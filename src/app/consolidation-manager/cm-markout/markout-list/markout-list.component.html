<mat-card class="mat-elevation-z g-card h-100" data-automation-id="markout-list-card">
  <mat-card-content>

    <h2 class="card-header-title mb-0 d-flex align-items-center mb-3" data-automation-id="transactions-heading">
      <div class="mat-icon-wrap me-1 me-lg-3">
        <span class="material-symbols-outlined">
          dvr
        </span>
      </div>
      <span>Transactions</span>
    </h2>

    <div class="row align-items-center">
      <div class="col-12">
        <div class="card br-14 table-responsive" data-automation-id="transactions-table-container">
          <ng-scrollbar track="all" class="custom-scrollbar mat-table-scrollbar" data-automation-id="transactions-table-scrollbar">

            <table mat-table [dataSource]="markoutlistdataSource" matSort
              class="custom-table g-card-table employee-location-table w-100"
              (matSortChange)="announceSortChange($event)" data-automation-id="transactions-table">
              <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef mat-sort-header data-automation-id="table-header-Status">Status</th>
                <td mat-cell *matCellDef="let element; let i = index" [attr.data-automation-id]="'table-data-Status-' + (element.status ? element.status : ' ')">
                  <div class="d-flex align-items-center ">
                    <span [ngClass]="{
                      'label-yellow' : element.status == 'Short' ,
                      'label-blue2' : element.status == 'Ship Short',
                      'label-red' : element.status == 'Missed',
                      'label-green' : element.status == 'Complete',
                      'not-inducted-status' : element.status == 'Not Inducted'  }" 
                     class="br-14  label px-3 f-16">{{element?.status}}</span>
                  </div>
                </td>
              </ng-container>

              <ng-container matColumnDef="toteId">
                <th mat-header-cell mat-sort-header *matHeaderCellDef data-automation-id="table-header-Tote ID">Tote ID</th>
                <td mat-cell *matCellDef="let element; let i = index" [attr.data-automation-id]="'table-data-Tote ID-' + (element.toteId ? element.toteId : ' ')">{{ element?.toteId }}</td>
              </ng-container>

              <ng-container matColumnDef="itemNumber">
                <th mat-header-cell mat-sort-header *matHeaderCellDef replacePlaceholder [replacePlaceHolder]="placeholders.itemNumber" [fallbackPlaceHolder]="placeholders.itemNumberFallback" data-automation-id="table-header-Item Number">{{ItemNumber}}</th>
                <td mat-cell *matCellDef="let element; let i = index" [attr.data-automation-id]="'table-data-Item Number-' + (element.itemNumber ? element.itemNumber : ' ')">{{ element?.itemNumber }}</td>
              </ng-container>

              <ng-container matColumnDef="location">
                <th mat-header-cell *matHeaderCellDef mat-sort-header data-automation-id="table-header-Location">Location</th>
                <td mat-cell *matCellDef="let element; let i = index" 
                #tooltip="matTooltip" matTooltipPosition="above"
                [matTooltip]="element.location" 
                [attr.data-automation-id]="'table-data-Location-' + (element.location ? element.location : ' ')">{{ element?.location }}</td>
              </ng-container>

              <ng-container matColumnDef="compQty">
                <th mat-header-cell *matHeaderCellDef mat-sort-header data-automation-id="table-header-Picked Qty">Picked Qty</th>
                <td mat-cell *matCellDef="let element; let i = index" [attr.data-automation-id]="'table-data-Picked Qty-' + (element.compQty !== null && element.compQty !== undefined ? element.compQty : ' ')">{{ element?.compQty }}</td>
              </ng-container>

              <ng-container matColumnDef="completedDate">
                <th mat-header-cell *matHeaderCellDef mat-sort-header data-automation-id="table-header-Completed Date">Completed Date</th>
                <td mat-cell *matCellDef="let element; let i = index" [attr.data-automation-id]="'table-data-Completed Date-' + (element.completedDate ? element.completedDate : ' ')">{{ element?.completedDate| date:'M/d/yyyy h:mm:ss a' }}</td>
              </ng-container>

              <ng-container matColumnDef="transQty">
                <th mat-header-cell *matHeaderCellDef mat-sort-header data-automation-id="table-header-Trans Qty">Trans Qty</th>
                <td mat-cell *matCellDef="let element; let i = index" [attr.data-automation-id]="'table-data-Trans Qty-' + (element.transQty ? element.transQty : ' ')">{{ element?.transQty }}</td>
              </ng-container>

              <ng-container matColumnDef="shortQty">
                <th mat-header-cell *matHeaderCellDef mat-sort-header data-automation-id="table-header-Short Qty">Short Qty</th>
                <td mat-cell *matCellDef="let element; let i = index" [attr.data-automation-id]="'table-data-Short Qty-' + (element.shortQty ? element.shortQty : ' ')">{{ element?.shortQty }}</td>
              </ng-container>

              <ng-container matColumnDef="actions" stickyEnd>
                <th mat-header-cell *matHeaderCellDef data-automation-id="table-header-Actions"></th>
                <td mat-cell *matCellDef="let element; let i = index" class="custom-cell" [attr.data-automation-id]="'table-data-Actions-' + i">
                  <button mat-icon-button [matMenuTriggerFor]="appMenu" aria-label=""
                    [ngClass]="{'active-btn':element.selected}" class="circle-icon-o active-btn" appearance="outline" [attr.data-automation-id]="'actions-button-' + (element.itemNumber ? element.itemNumber : ' ')">
                    <mat-icon>more_horiz</mat-icon>
                  </button>
                  <mat-menu #appMenu="matMenu" [attr.data-automation-id]="'actions-menu-' + (element.itemNumber ? element.itemNumber : ' ')">
                    <button [disabled]="element.status == 'Complete' ||element.status == 'Ship Short' || element.status == 'Not Inducted'"  mat-menu-item (click)="completeTrans(element)" data-automation-id="complete-menu-item">Complete</button>
                    <button [disabled]="element.status == 'Complete' || element.status == 'Ship Short' || element.status == 'Not Inducted'" mat-menu-item (click)="shipShort(element)" data-automation-id="ship-short-menu-item">Ship Short</button>
                    <button [disabled]="element.status == 'Complete' || element.status == 'Ship Short' || element.status == 'Not Inducted'" mat-menu-item (click)="showUpdateQTY(element)" data-automation-id="update-quantity-menu-item">Update Quantity</button>
                    <button [disabled]="element.status == 'Complete' || element.status == 'Not Inducted'" mat-menu-item (click)="blossom(element,blossomType.Blossom)" data-automation-id="blossom-menu-item">Blossom</button>
                    <button [disabled]="element.status == 'Complete' || !isBlossomComplete || element.status == 'Not Inducted'" mat-menu-item (click)="blossom(element,blossomType.BlossomComplete)" data-automation-id="blossom-complete-menu-item">Blossom Complete</button>
                  </mat-menu>
                </td>
              </ng-container>

              <tr class="mat-row " *matNoDataRow data-automation-id="no-data-row">
                <td class="mat-cell text-center" [attr.colspan]="displayedColumns.length" data-automation-id="no-data-cell">
                  No data matching the filter.
                </td>
              </tr>
              <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky:true" data-automation-id="transactions-table-header-row"></tr>
              <tr mat-row class="table-row" tabindex="1" (click)="selectRow(row)" *matRowDef="let row; columns: displayedColumns;" [attr.data-automation-id]="'transactions-table-row-' + (row.itemNumber ? row.itemNumber : ' ')"></tr>

            </table>
          </ng-scrollbar>

        </div>
        <div class="table-pagination d-flex justify-content-start" *ngIf="displayedColumns && markoutlistdataSource" data-automation-id="transactions-paginator">
          <mat-paginator [pageSize]="10" #paginator [length]="markoutlistdataSource.filteredData.length"
          [pageSizeOptions]="[10, 20, 100]" showFirstLastButtons [pageSizeOptions]="[10, 20, 100]" data-automation-id="table-paginator">
        </mat-paginator>
        </div>
      </div>
    </div>

  </mat-card-content>
</mat-card>